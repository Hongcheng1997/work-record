<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Https | 个人学习博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/work-record/assets/css/0.styles.68f3643a.css" as="style"><link rel="preload" href="/work-record/assets/js/app.bb96a932.js" as="script"><link rel="preload" href="/work-record/assets/js/2.8cd38eb8.js" as="script"><link rel="preload" href="/work-record/assets/js/8.59d4b254.js" as="script"><link rel="prefetch" href="/work-record/assets/js/10.0398fe80.js"><link rel="prefetch" href="/work-record/assets/js/11.ef180a16.js"><link rel="prefetch" href="/work-record/assets/js/12.6f2f5bb1.js"><link rel="prefetch" href="/work-record/assets/js/13.68b11f16.js"><link rel="prefetch" href="/work-record/assets/js/14.67c50ebd.js"><link rel="prefetch" href="/work-record/assets/js/15.431a68dd.js"><link rel="prefetch" href="/work-record/assets/js/16.23d5c1a4.js"><link rel="prefetch" href="/work-record/assets/js/17.db3a71c5.js"><link rel="prefetch" href="/work-record/assets/js/18.104ad2ba.js"><link rel="prefetch" href="/work-record/assets/js/19.dda002b1.js"><link rel="prefetch" href="/work-record/assets/js/20.8ce513f6.js"><link rel="prefetch" href="/work-record/assets/js/21.6258d690.js"><link rel="prefetch" href="/work-record/assets/js/22.f84b6063.js"><link rel="prefetch" href="/work-record/assets/js/23.1171e089.js"><link rel="prefetch" href="/work-record/assets/js/24.7a659fdb.js"><link rel="prefetch" href="/work-record/assets/js/25.8395cccb.js"><link rel="prefetch" href="/work-record/assets/js/26.73695a02.js"><link rel="prefetch" href="/work-record/assets/js/27.60d82ddc.js"><link rel="prefetch" href="/work-record/assets/js/28.fb4ae8ff.js"><link rel="prefetch" href="/work-record/assets/js/3.19d95e9d.js"><link rel="prefetch" href="/work-record/assets/js/4.323a58c7.js"><link rel="prefetch" href="/work-record/assets/js/5.99b8aeb7.js"><link rel="prefetch" href="/work-record/assets/js/6.7ead1d22.js"><link rel="prefetch" href="/work-record/assets/js/7.8be12c51.js"><link rel="prefetch" href="/work-record/assets/js/9.0f1ccd9d.js">
    <link rel="stylesheet" href="/work-record/assets/css/0.styles.68f3643a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/work-record/" class="home-link router-link-active"><!----> <span class="site-name">个人学习博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/work-record/前端基础/模块化.html" class="sidebar-link">模块化发展历程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法分类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具类相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https"><a href="#https" class="header-anchor">#</a> Https</h1> <p>http 传输过程中容易被中间人攻击，捕获、伪造报文。因此需要在传输过程中对报文进行加密，一般采用两种加密方式（对称加密和非对称加密）。对称加密比非对称加密效率高、性能更好，Https 是在 Http 上建立 SSL 加密层，并对传输数据进行加密，是 Http 协议的安全版</p> <h2 id="对称加密和非对称加密"><a href="#对称加密和非对称加密" class="header-anchor">#</a> 对称加密和非对称加密</h2> <ol><li>对称加密：加密和解密使用同一个密钥，任何人只要有密钥就可以解密。转发密钥时存在通信被监听、密钥落入攻击者之手的风险</li> <li>非对称加密：一把私有密钥，一把公开密钥。发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。</li></ol> <h2 id="ca-证书"><a href="#ca-证书" class="header-anchor">#</a> CA 证书</h2> <p>当客户端或服务端拿到对方的公钥后，无法确实公钥是否可靠，也有可能是中间人的公钥。这时需要有权威的 CA 机构给公钥做背书，
颁布 CA 证书。</p> <ul><li>生成证书的过程：</li></ul> <ol><li>服务端在本地生成私钥（openssl genrsa -out cliu8siteprivate.key 1024）</li> <li>通过私钥生成公钥（openssl rsa -in cliu8siteprivate.key -pubout -outcliu8sitepublic.pem）</li> <li>通过证书请求生成证书（openssl req -key cliu8siteprivate.key -new -out cliu8sitecertificate.req）</li> <li>权威机构会通过签名算法对信息做一个 Hash 计算，得到一个 Hash 值。再用权威机构自身的私钥对 Hash 签名。</li></ol> <ul><li><p>证书内容：
Issuer，也即证书是谁颁发的；Subject，就是证书颁发给谁；Validity 是证书期限；Public-key 是公钥内容；Signature Algorithm 是签名算法。</p></li> <li><p>证书验证过程
当客户端拿到服务端的证书时，会在系统中的证书链找到颁发服务端证书机构，通过他的公钥解开证书的的签名，如果解开的签名 Hash 和证书中的 Hash 值一样，则证明证书有效。
当然还存在一个问题，怎么验证客户端的 CA 机构的公钥匙对的呢？所以 CA 的机构的公钥需要有更加权威机构私钥给下一级公钥做背书，层层授信背书形成 CA 链。直到全球几个著名的 CA，称作 root CA</p></li></ul> <h2 id="https-握手过程"><a href="#https-握手过程" class="header-anchor">#</a> Https 握手过程</h2> <p>由于对称加密性能更好，所以握手过程采用对称加密。为了公钥不被泄露，会先用非对称加密的方式交换双方公钥。等双方证书验证通过后，生成对称密钥，之后通信采用对称加密通信。</p> <ol><li>客户端向服务器发送 Client Hello，并带上加密套件、TLS 版本、随机数</li> <li>服务端发送 Server Hello，确认使用的加密套件和随机数</li> <li>服务端发送 Server Certificate 将公钥和证书返回给客户端</li> <li>服务端发送 Server Hello Done 确认就这些信息了</li> <li>客户端发送 Client Certificate 将客户端的证书给服务端验证</li> <li>客户端通过 CA 机构验证证书，失败则警告，成功则会生成 Pre-master，同时会发送 Client Key Exchange 把加密过的 Pre-master 传给服务端，双方通过 3 个随机数生成对称密钥</li> <li>有了对称密钥，客户端就可以发送编码改变通知 Change Cipher Spec，表示以后都采用协商的通信密钥和加密算法进行加密通信了</li></ol> <p><img src="/work-record/assets/img/https.428ad9ff.jpeg" alt="Alt"></p> <h2 id="https-解决-http-存在的问题"><a href="#https-解决-http-存在的问题" class="header-anchor">#</a> Https 解决 Http 存在的问题</h2> <ol><li>通信使用明文，内容可能被窃听。 ——加密</li> <li>无法保证报文的完整性，可能遭篡改。 ——数字签名</li> <li>不验证通信双反的身份，可能遭伪装。 ——数字证书</li></ol> <h2 id="tls-ssl-功能实现"><a href="#tls-ssl-功能实现" class="header-anchor">#</a> TLS/SSL 功能实现</h2> <p>主要依赖 非对称加密、对称加密、散列函数三种算法实现</p> <ul><li>利用非对称加密实现身份认证和秘钥协商</li> <li>利用对称加密将协商好的秘钥对数据进行加密</li> <li>利用散列函数验证信息的完整性</li></ul> <h2 id="https-和-http-的区别"><a href="#https-和-http-的区别" class="header-anchor">#</a> Https 和 Http 的区别</h2> <ol><li>Https 更安全，对搜索引擎更友好，利于 SEO</li> <li>Https 需要 SSL 证书 http 不需要</li> <li>https 标准端口 443 http 80</li> <li>https 基于传输层 http 基于应用层</li> <li>https 在浏览器显示绿色安全锁， http 没有</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/work-record/assets/js/app.bb96a932.js" defer></script><script src="/work-record/assets/js/2.8cd38eb8.js" defer></script><script src="/work-record/assets/js/8.59d4b254.js" defer></script>
  </body>
</html>
