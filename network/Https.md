# Https

## Https是在Http上建立SSL加密层，并对传输数据进行加密，是Http协议的安全版。

### Https解决Http存在的问题
1. 通信使用明文，内容可能被窃听。 ——加密
2. 无法保证报文的完整性，可能遭篡改。 ——数字签名
3. 不验证通信双反的身份，可能遭伪装。 ——数字证书

### TCL/SSL功能实现
主要依赖 非对称加密、对称加密、散列函数三种算法实现
- 利用非对称加密实现身份认证和秘钥协商
- 利用对称加密将协商好的秘钥对数据进行加密
- 利用散列函数验证信息的完整性

### 对称加密和非对称加密
1. 对称加密：加密和解密使用同一个密钥，任何人只要有密钥就可以解密。转发密钥时存在通信被监听、密钥落入攻击者之手的风险
2. 非对称加密：一把私有密钥，一把公开密钥。发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。

### Https握手过程
1. 客户端向服务器发送https请求
2. 服务端将配置好的公钥和证书返回给客户端
3. 客户端验证证书，失败则警告
4. 客户端使用伪随机数生成器生成加密使用的对称秘钥，然后用服务端提供的公钥加密，最后将这个会话秘钥发送给服务端
5. 服务端用自己的私钥解密得到对称秘钥，至此客户端和服务端都有了相同的对称秘钥
6. 服务端使用对称秘钥加密明文内容发送给客户端
7. 客户端使用对称秘钥得到明文内容
8. 客户端再次发起Https请求 使用对称秘钥加密明文内容，服务端使用对称秘钥解密得到明文内容

### Https 和 Http的区别
1. Https更安全，对搜索引擎更友好，利于SEO
2. Https需要SSL证书 http不需要
3. https标准端口443  http 80
4. https基于传输层  http基于应用层
5. https在浏览器显示绿色安全锁， http没有