<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>巧用 Charles | 个人学习博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/work-record/assets/css/0.styles.68f3643a.css" as="style"><link rel="preload" href="/work-record/assets/js/app.09b06b99.js" as="script"><link rel="preload" href="/work-record/assets/js/2.8cd38eb8.js" as="script"><link rel="preload" href="/work-record/assets/js/21.6258d690.js" as="script"><link rel="prefetch" href="/work-record/assets/js/10.0398fe80.js"><link rel="prefetch" href="/work-record/assets/js/11.363bcb87.js"><link rel="prefetch" href="/work-record/assets/js/12.ad815e85.js"><link rel="prefetch" href="/work-record/assets/js/13.42d6a324.js"><link rel="prefetch" href="/work-record/assets/js/14.b34abcd0.js"><link rel="prefetch" href="/work-record/assets/js/15.e1cecc82.js"><link rel="prefetch" href="/work-record/assets/js/16.485b4dba.js"><link rel="prefetch" href="/work-record/assets/js/17.db3a71c5.js"><link rel="prefetch" href="/work-record/assets/js/18.104ad2ba.js"><link rel="prefetch" href="/work-record/assets/js/19.dda002b1.js"><link rel="prefetch" href="/work-record/assets/js/20.8ce513f6.js"><link rel="prefetch" href="/work-record/assets/js/22.f84b6063.js"><link rel="prefetch" href="/work-record/assets/js/23.1171e089.js"><link rel="prefetch" href="/work-record/assets/js/24.7a659fdb.js"><link rel="prefetch" href="/work-record/assets/js/25.8395cccb.js"><link rel="prefetch" href="/work-record/assets/js/26.73695a02.js"><link rel="prefetch" href="/work-record/assets/js/27.60d82ddc.js"><link rel="prefetch" href="/work-record/assets/js/28.fb4ae8ff.js"><link rel="prefetch" href="/work-record/assets/js/29.ff67c0cc.js"><link rel="prefetch" href="/work-record/assets/js/3.8dc75052.js"><link rel="prefetch" href="/work-record/assets/js/4.323a58c7.js"><link rel="prefetch" href="/work-record/assets/js/5.99b8aeb7.js"><link rel="prefetch" href="/work-record/assets/js/6.b948448d.js"><link rel="prefetch" href="/work-record/assets/js/7.8be12c51.js"><link rel="prefetch" href="/work-record/assets/js/8.59d4b254.js"><link rel="prefetch" href="/work-record/assets/js/9.0f1ccd9d.js">
    <link rel="stylesheet" href="/work-record/assets/css/0.styles.68f3643a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/work-record/" class="home-link router-link-active"><!----> <span class="site-name">个人学习博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法分类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工具类相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/work-record/工具类相关/Charles.html" class="active sidebar-link">Charles 抓包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/work-record/工具类相关/Charles.html#web-网页抓包" class="sidebar-link">web 网页抓包</a></li><li class="sidebar-sub-header"><a href="/work-record/工具类相关/Charles.html#ios-抓包" class="sidebar-link">ios 抓包</a></li><li class="sidebar-sub-header"><a href="/work-record/工具类相关/Charles.html#安卓真机" class="sidebar-link">安卓真机</a></li><li class="sidebar-sub-header"><a href="/work-record/工具类相关/Charles.html#常见问题" class="sidebar-link">常见问题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="巧用-charles"><a href="#巧用-charles" class="header-anchor">#</a> 巧用 Charles</h1> <p>破解版下载链接: <a href="https://www.macwk.com/soft/charles" target="_blank" rel="noopener noreferrer">https://www.macwk.com/soft/charles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="web-网页抓包"><a href="#web-网页抓包" class="header-anchor">#</a> web 网页抓包</h2> <h3 id="_1-http-代理配置"><a href="#_1-http-代理配置" class="header-anchor">#</a> 1. HTTP 代理配置</h3> <p>因为本机代理默认是关闭的，我们也可以在 Proxy Setttings 中点击 MacOS，勾选 Enable macOS proxy on lounch，这样每次打开 Charles 就会默认打开代理了</p> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1620788234626-0b8cc1ee-988e-4925-8a3a-df9a55e68824.png#clientId=uf92e8f21-7a68-4&amp;from=paste&amp;height=900&amp;id=PL2Es&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=900&amp;originWidth=1546&amp;originalType=binary&amp;ratio=1&amp;size=424449&amp;status=done&amp;style=none&amp;taskId=u744c91d4-cd98-487a-b878-1f5ba240f15&amp;width=1546" alt="image.png"></p> <h3 id="_2-https-代理配置"><a href="#_2-https-代理配置" class="header-anchor">#</a> 2. HTTPS 代理配置</h3> <ul><li>电脑端安装证书首先点击 Charles -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate 在电脑端安装证书</li></ul> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1620788261393-f96f8109-5e45-40d2-88b9-8c384db538af.png#clientId=uf92e8f21-7a68-4&amp;from=paste&amp;height=716&amp;id=u7223e061&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=716&amp;originWidth=1758&amp;originalType=binary&amp;ratio=1&amp;size=445724&amp;status=done&amp;style=none&amp;taskId=u753b90e4-00a4-425c-9d7a-5560fbf3f2f&amp;width=1758" alt="image.png"></p> <ul><li>在钥匙串中点击刚刚安装的证书，手动信任全部权限，最后输入密码保存修改</li> <li>在 Charles 中选择需要的 https 请求，打开 SSL Proxying</li></ul> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1620789061799-857fe323-8c31-478b-baa4-7f55dba27920.png#clientId=uf92e8f21-7a68-4&amp;from=paste&amp;height=824&amp;id=u7be0541f&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=824&amp;originWidth=1074&amp;originalType=binary&amp;ratio=1&amp;size=269108&amp;status=done&amp;style=none&amp;taskId=u14ec84b6-98c6-4f1c-9b3c-a36c3e93c3c&amp;width=1074" alt="image.png"></p> <h2 id="ios-抓包"><a href="#ios-抓包" class="header-anchor">#</a> ios 抓包</h2> <h3 id="ios-模拟器抓包"><a href="#ios-模拟器抓包" class="header-anchor">#</a> ios 模拟器抓包</h3> <p>前提：已打开 Charles Proxy，并在电脑端安装了对应证书</p> <ol><li>打开 Charles -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate on IOS Simulators</li> <li>启动 IOS 模拟器，General -&gt; About -&gt; Certificate Trust Settings 把证书开关打开</li> <li>然后根据提示在浏览器中输入 chls.pro/ssl 并下载安装 Charles CA 证书</li> <li>打开设置，进入 Profile 安装好证书</li></ol> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1620788467719-0675201e-b623-4cf1-a683-8fa627958cbe.png#clientId=uf92e8f21-7a68-4&amp;from=paste&amp;height=826&amp;id=ubda47c36&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=826&amp;originWidth=386&amp;originalType=binary&amp;ratio=1&amp;size=88100&amp;status=done&amp;style=none&amp;taskId=u00dfaa97-7a37-4b53-9f8b-fbc7d87e15b&amp;width=386" alt="image.png"></p> <ol start="5"><li>下载、安装好证书后进入 General -&gt; About -&gt; Certificate Trust Settings 并信任证书</li></ol> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1620788605815-c76b2069-ba45-43df-bc95-55ac9806219b.png#clientId=uf92e8f21-7a68-4&amp;from=paste&amp;height=826&amp;id=uaf980fb5&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=826&amp;originWidth=386&amp;originalType=binary&amp;ratio=1&amp;size=99408&amp;status=done&amp;style=none&amp;taskId=uebb52a4a-7b49-44d4-bf38-201a1acd8ae&amp;width=386" alt="image.png"></p> <h3 id="ios-真机"><a href="#ios-真机" class="header-anchor">#</a> ios 真机</h3> <ol><li>打开 Charles -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate on a Mobile Derive，弹窗中显示代理 ip 地址及端口，参照模拟器，手机安装好证书并信任</li> <li>真机抓包必须与电脑需要处于同一个局域网，并且在手机 Wifi 高级选项中手动配置网络代理（代理地址可在 Charles -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate on a Mobile Derive 查看）</li> <li>Charles 会弹出授权弹窗，点击 Allow</li></ol> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2021/png/294489/1629970435045-12ee9d2d-8668-459c-b396-46f885f9b960.png#clientId=u8f6bd953-73c2-4&amp;from=drop&amp;id=u3e29432d&amp;margin=%5Bobject%20Object%5D&amp;name=1459640-20181121190645487-154158785.png&amp;originHeight=117&amp;originWidth=569&amp;originalType=binary&amp;ratio=1&amp;size=31939&amp;status=done&amp;style=none&amp;taskId=u38681d69-84ae-468d-8564-f1b95d31f31" alt="1459640-20181121190645487-154158785.png"></p> <h2 id="安卓真机"><a href="#安卓真机" class="header-anchor">#</a> 安卓真机</h2> <ol><li>打开 Charles -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate on a Mobile Derive，在浏览器中输入 chls.pro/ssl 并下载 Charles CA 证书</li> <li>安卓手机 pem 证书无法直接打开，将下载后的证书另存到 SD 卡中，在设置 -&gt; 安全与隐私 -&gt; 从 SD 卡中安装，选择 Charles CA 证书安装</li> <li>在安全与隐私中 -&gt; 受信任的凭据 -&gt; 用户，可查看证书是否安装成功</li></ol> <p><strong>注意:</strong> 安卓系统 7.0 版本以上只信任系统级别的证书，用户级别的证书不生效，rn 项目对 rn-debug 需要升级到足够高版本（1.1.4）可正常抓包</p> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="文件损坏打不开"><a href="#文件损坏打不开" class="header-anchor">#</a> 文件损坏打不开</h3> <p>一般是 mac 安全级别过高</p> <p>**解决办法：**偏好设置-&gt;安全与隐私-&gt;通用-&gt;信任任何来源。如果没有任何来源选项，打开终端输入 sudo spctl --master-disable，重新打开偏好设置即可。</p> <h3 id="charles-不能开启-proxy"><a href="#charles-不能开启-proxy" class="header-anchor">#</a> Charles 不能开启 proxy</h3> <p>提示: <em><em>Charles cannot configure your proxy settings while it is on a read-only volume. Perhaps you are running Charles from the disk image? If so, please copy Charles to the Applications folder and run it again. Otherwise please ensure that Charles is writable by the current user and try again</em></em> ，由于只有只读权限引起</p> <p><strong>解决办法：</strong> <code>sudo chown -R root &quot;/Applications/Charles.app/Contents/Resources&quot;</code> <code>sudo chmod -R u+s &quot;/Applications/Charles.app/Contents/Resources&quot;</code></p> <h3 id="charles-抓不到包"><a href="#charles-抓不到包" class="header-anchor">#</a> Charles 抓不到包</h3> <p>1、代理冲突导致不能抓包，解决办法：设置 -&gt; 网络 -&gt; Wifi -&gt; 高级 -&gt; 代理，在左侧的配置协议列表中取消勾选&quot;自动发现代理&quot;和“自动代理配置”。
2、Charles 根证书未信任，解决办法：打开钥匙串，找到 charles 证书，将该证书选择永久信任</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/work-record/工程化/webpack.html" class="prev">
        webpack 相关
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/work-record/assets/js/app.09b06b99.js" defer></script><script src="/work-record/assets/js/2.8cd38eb8.js" defer></script><script src="/work-record/assets/js/21.6258d690.js" defer></script>
  </body>
</html>
