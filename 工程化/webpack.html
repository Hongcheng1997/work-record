<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 相关记录 | 个人学习博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/work-record/assets/css/0.styles.68f3643a.css" as="style"><link rel="preload" href="/work-record/assets/js/app.8b56915a.js" as="script"><link rel="preload" href="/work-record/assets/js/2.8cd38eb8.js" as="script"><link rel="preload" href="/work-record/assets/js/24.e855f8d7.js" as="script"><link rel="prefetch" href="/work-record/assets/js/10.0398fe80.js"><link rel="prefetch" href="/work-record/assets/js/11.363bcb87.js"><link rel="prefetch" href="/work-record/assets/js/12.ad815e85.js"><link rel="prefetch" href="/work-record/assets/js/13.42d6a324.js"><link rel="prefetch" href="/work-record/assets/js/14.b34abcd0.js"><link rel="prefetch" href="/work-record/assets/js/15.e1cecc82.js"><link rel="prefetch" href="/work-record/assets/js/16.23d48d00.js"><link rel="prefetch" href="/work-record/assets/js/17.ac456d9e.js"><link rel="prefetch" href="/work-record/assets/js/18.b2c15090.js"><link rel="prefetch" href="/work-record/assets/js/19.e8d8d262.js"><link rel="prefetch" href="/work-record/assets/js/20.2ce29364.js"><link rel="prefetch" href="/work-record/assets/js/21.b340e493.js"><link rel="prefetch" href="/work-record/assets/js/22.1ae4d0c1.js"><link rel="prefetch" href="/work-record/assets/js/23.ac09c343.js"><link rel="prefetch" href="/work-record/assets/js/25.1f64667c.js"><link rel="prefetch" href="/work-record/assets/js/26.367acef3.js"><link rel="prefetch" href="/work-record/assets/js/27.da68a238.js"><link rel="prefetch" href="/work-record/assets/js/3.56cc6806.js"><link rel="prefetch" href="/work-record/assets/js/4.323a58c7.js"><link rel="prefetch" href="/work-record/assets/js/5.99b8aeb7.js"><link rel="prefetch" href="/work-record/assets/js/6.733181ad.js"><link rel="prefetch" href="/work-record/assets/js/7.781a3ed4.js"><link rel="prefetch" href="/work-record/assets/js/8.a0d5b354.js"><link rel="prefetch" href="/work-record/assets/js/9.4926fe04.js">
    <link rel="stylesheet" href="/work-record/assets/css/0.styles.68f3643a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/work-record/" class="home-link router-link-active"><!----> <span class="site-name">个人学习博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络协议</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/work-record/network/http.html" class="sidebar-link">Http 协议</a></li><li><a href="/work-record/network/https.html" class="sidebar-link">Https 协议</a></li><li><a href="/work-record/network/tcp.html" class="sidebar-link">TCP 协议</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目工程化</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-相关记录"><a href="#webpack-相关记录" class="header-anchor">#</a> webpack 相关记录</h1> <p>模块化</p> <ul><li><p>es Module
静态编译
import 导入、export 导出</p></li> <li><p>commonJS
动态编译
export.module 导出、require 导入</p></li></ul> <h2 id="devtool"><a href="#devtool" class="header-anchor">#</a> devtool</h2> <ul><li>开发</li> <li>生产</li></ul> <h2 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h2> <ul><li>url-loader</li> <li>babel-loader</li> <li>css-loader/style-loader</li> <li>ts-loader</li></ul> <h2 id="plugins"><a href="#plugins" class="header-anchor">#</a> plugins</h2> <ul><li>WebpackBar</li> <li>HtmlWebpackPlugin</li> <li>EnvironmentPlugin</li> <li>MiniCssExtractPlugin</li> <li>HappyPack</li></ul> <h2 id="自定义-plugin-loader"><a href="#自定义-plugin-loader" class="header-anchor">#</a> 自定义 plugin/loader</h2> <p>plugin</p> <p>方法内必须要有 apply 方法，apply 内包含 complier 实例，可以拿到 webpack 各个生命周期，根据自己的需求使用具体的生命周期即可（Tapable）</p> <h2 id="常见优化方法"><a href="#常见优化方法" class="header-anchor">#</a> 常见优化方法</h2> <p>1、减小打包产物体积大小</p> <p>使用 webpack-bundle-analyzer 查看打包后生成的 bundle 体积分析</p> <ul><li>cdn
图片压缩 base64 （移动端工程会跑脚本把本地图片上传阿里云 oss 做 cdn 加速）</li></ul> <p>代码压缩
optimization.minimizer 中初始化 CssMinimizerPlugin、TerserWebpackPlugin</p> <ul><li>js 压缩 TerserWebpackPlugin（生产模式会自动开启）</li> <li>css 压缩 optimization.minimizer 定义压缩插件(CssMinimizerPlugin)、
按需加载</li></ul> <p>代码分离</p> <ul><li>js 分离，SplitChunksPlugin 插件开箱即用，可以将公共的依赖模块提取到已有的入口 chunk 中，或者提取到一个新生成的 chunk。</li> <li>css 分离，MiniCssExtractPlugin 插件将 CSS 提取到单独的文件中，为每个包含 CSS 的 JS 文件创建一个 CSS 文件，并且支持 CSS 和 SourceMaps 的按需加载。</li></ul> <p>tree-Shaking</p> <ul><li>js webpack5 自带</li> <li>css PurgeCSSPlugin</li></ul> <p>2、提高构建速度</p> <p>speed-measure-webpack-plugin 插件进行构建速度分析，可以看到各个 loader、plugin 的构建时长，后续可针对耗时 loader、plugin 进行优化。</p> <ul><li>thread-loader 开启多 cpu 打包</li> <li>通过配置 webpack 持久化缓存 cache: filesystem，来缓存生成的 webpack 模块和 chunk，改善构建速度。</li> <li>为 loader 指定 include，减少 loader 应用范围</li></ul> <h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <p>通过 babylon 分析代码生成 ast 语法树，通过 babel-traverse 分析 ast 中的依赖关系，以及 babel-core 将 ast 解析
成 es5 代码，可以拿到所有的依赖关系及模块代码。最后通过函数自执行的方式执行所有代码</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/work-record/assets/js/app.8b56915a.js" defer></script><script src="/work-record/assets/js/2.8cd38eb8.js" defer></script><script src="/work-record/assets/js/24.e855f8d7.js" defer></script>
  </body>
</html>
