<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.webpack 构建流程 | 个人学习博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="./assets/css/0.styles.fbb7b06c.css" as="style"><link rel="preload" href="./assets/js/app.9785a451.js" as="script"><link rel="preload" href="./assets/js/2.70ac8c2a.js" as="script"><link rel="preload" href="./assets/js/18.0aab2aea.js" as="script"><link rel="prefetch" href="./assets/js/10.1d825909.js"><link rel="prefetch" href="./assets/js/11.e5868fc7.js"><link rel="prefetch" href="./assets/js/12.c9f2066e.js"><link rel="prefetch" href="./assets/js/13.56c1fccc.js"><link rel="prefetch" href="./assets/js/14.e76761fc.js"><link rel="prefetch" href="./assets/js/15.b0380b6a.js"><link rel="prefetch" href="./assets/js/16.92b21b22.js"><link rel="prefetch" href="./assets/js/17.9a5b840d.js"><link rel="prefetch" href="./assets/js/19.72d5f028.js"><link rel="prefetch" href="./assets/js/20.6101b765.js"><link rel="prefetch" href="./assets/js/3.31091237.js"><link rel="prefetch" href="./assets/js/4.244e7092.js"><link rel="prefetch" href="./assets/js/5.46e8e12d.js"><link rel="prefetch" href="./assets/js/6.1d49ccc6.js"><link rel="prefetch" href="./assets/js/7.79cb8b03.js"><link rel="prefetch" href="./assets/js/8.54d4f16d.js"><link rel="prefetch" href="./assets/js/9.e9a91a22.js">
    <link rel="stylesheet" href="./assets/css/0.styles.fbb7b06c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">个人学习博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络协议</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./network/Http.html" class="sidebar-link">Http 协议</a></li><li><a href="/./network/Https.html" class="sidebar-link">Https 协议</a></li><li><a href="/./network/Tcp.html" class="sidebar-link">TCP 协议</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-webpack-构建流程"><a href="#_1-webpack-构建流程" class="header-anchor">#</a> 1.webpack 构建流程</h2> <ol><li>初始化参数：从配置文件和 shell 语句中读取与合并参数，得出最终的参数</li> <li>开始编译：用上一步的到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译</li> <li>确定入口：根据配置中的 entry 找到所有入口文件</li> <li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理</li> <li>完成模块编译：在经过第 4 步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及依赖关系</li> <li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 chunk 再把这个 chunk 转换成一个单独的文件加入到输出列表</li> <li>输出完成：确定输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ol> <h2 id="_2-常见-loader-plugin"><a href="#_2-常见-loader-plugin" class="header-anchor">#</a> 2.常见 loader plugin</h2> <h2 id="_3-loader-和-plugin-的区别"><a href="#_3-loader-和-plugin-的区别" class="header-anchor">#</a> 3. loader 和 plugin 的区别</h2> <p>loader 本质上是一个函数，在函数内对接收到的内容进行转换，返回转换后的结果。在 module.rules 中配置
plugin 就是插件，可扩展 webpack 的功能，在合适的时机通过 webpack 提供的 api 改变输出结果。 在 plugins 中单独配置</p> <h2 id="_4-source-map-是什么"><a href="#_4-source-map-是什么" class="header-anchor">#</a> 4.source map 是什么？</h2> <p>source map 是将编译、打包、压缩后的代码映射回源代码的过程</p> <h2 id="_5-模块打包原理"><a href="#_5-模块打包原理" class="header-anchor">#</a> 5.模块打包原理</h2> <p>webpack 实际上为每一个模块创造了一个可导出和导入的环境，本质没有修改代码的执行逻辑。</p> <h2 id="_6-webpack-的热更新原理"><a href="#_6-webpack-的热更新原理" class="header-anchor">#</a> 6. Webpack 的热更新原理</h2> <p>webpack-dev-server 与 浏览器之间维护一个 websocket，当本地资源发生变化时，webpack-dev-server 会想浏览器推送更新，并带上构建时的 hash，让客户端与上一次资源进行对比，如有差异就会向 webpack-dev-server 发起请求获取更高内容（文件列表，hash） 这样客户端就可以再借助这些信息想 webpack-dev-server 发起 jsonp 请求获取 chunk 的增量更新，拿到增量更新后，由 HotModulePlugin 这个插件处理</p> <h2 id="_7-优化-webpack-的构建速度"><a href="#_7-优化-webpack-的构建速度" class="header-anchor">#</a> 7.优化 webpack 的构建速度</h2> <ol><li>使用高版本的 webpack 和 node.js</li> <li>多进程多实例构建：thread-loader</li> <li>压缩代码</li> <li>压缩图片</li> <li>缩小打包作用域</li> <li>提取页面公共资源 代码分离</li> <li>利用缓存提升二次构建速度</li> <li>Tree shaking</li></ol> <h2 id="_8-babel-原理"><a href="#_8-babel-原理" class="header-anchor">#</a> 8.babel 原理</h2> <ol><li>解析：将代码转成 AST</li> <li>转换：根据一定规则转化、修改 AST</li> <li>生成：以新的 AST 为基础生成代码</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.9785a451.js" defer></script><script src="./assets/js/2.70ac8c2a.js" defer></script><script src="./assets/js/18.0aab2aea.js" defer></script>
  </body>
</html>
